@using MessageExtension_SP.Models
@model MessageExtension_SP.Models.ViewModels.FileUploadViewModel

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<form enctype="multipart/form-data" asp-controller="FileUpload" asp-action="Upload"
      method="post" class="mt-3" style="margin:25px;margin-top:10%!important">
    <div class="form-group row">
        <div class="col-sm-12">
            @Html.TextBoxFor(e => e.Title, htmlAttributes: new { @class = "form-control", @placeholder = "Enter Title" })
        </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-12">
            @Html.TextBoxFor(e => e.Description, htmlAttributes: new { @class = "form-control", @placeholder = "Enter Description" })
        </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-12">
            @Html.EditorFor(e => e.File)
        </div>
    </div>

    <div asp-validation-summary="All" class="text-danger"></div>

    <div class="form-group row">
        <div class="col-sm-10">
            <button type="submit" id="btnUpload" class="btn btn-primary" style="background-color:#5558AF;margin-left:100%;margin-top:5%">Upload</button>
        </div>
    </div>

    @*This script is required to display the selected file in the file upload element*@

    @section Scripts {
        <script src="~/lib/bootstrap/js/bootstrap.js"></script>
        <script src="~/lib/jquery/jquery.js"></script>
        <script src="https://statics.teams.microsoft.com/sdk/v1.4.2/js/MicrosoftTeams.min.js" crossorigin="anonymous"></script>
        <script>
            $(document).ready(function () {
                $('.custom-file-input').on("change", function () {
                    var fileName = $(this).val().split("\\").pop();
                    $(this).next('.custom-file-label').html(fileName);
                });
            });
        </script>
    }
</form>
